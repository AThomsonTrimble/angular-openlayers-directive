/*! angular-openlayers-directive WebApp 23-12-2014 */
!function(){"use strict";angular.module("webapp",["ngRoute","openlayers-directive"]).config(["$locationProvider",function(a){a.html5Mode(!1)}]);var a=angular.module("webapp");a.controller("CenterAutodiscoverController",["$scope",function(a){angular.extend(a,{center:{autodiscover:!0}})}]);var a=angular.module("webapp");a.controller("CenterUrlHashController",["$scope","$location","$timeout",function(a,b,c){angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:4,centerUrlHash:!0}});var d;a.$on("centerUrlHash",function(a,e){d&&c.cancel(d),d=c(function(){b.search({c:e})},300)})}]);var a=angular.module("webapp");a.controller("CenterController",["$scope",function(a){angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:6}})}]);var a=angular.module("webapp");a.controller("CustomController",["$scope",function(a){angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:8},defaults:{layers:{main:{source:{type:"OSM",url:"http://{a-c}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"}}},interactions:{mouseWheelZoom:!1},controls:{zoom:!1,rotate:!1,attribution:!1}}})}]);var a=angular.module("webapp");a.controller("FrontPageController",["$scope","$http","olData","olHelpers",function(a,b,c,d){var e={"009":{name:"Oceania",colors:["#CC0066","#993366","#990066","#CC3399","#CC6699"]},"019":{name:"America",colors:["#006699","#336666","#003366","#3399CC","#6699CC"]},150:{name:"Europe",colors:["#FF0000","#CC3333","#990000","#FF3333","#FF6666"]},"002":{name:"Africa",colors:["#00CC00","#339933","#009900","#33FF33","#66FF66"]},142:{name:"Asia",colors:["#FFCC00","#CC9933","#999900","#FFCC33","#FFCC66"]}},f=function(a){if(!a||!a["region-code"])return"#FFF";var b=e[a["region-code"]].colors,c=a["alpha-3"].charCodeAt(0)%b.length;return b[c]},g=function(b){var c=d.createStyle({fill:{color:f(a.countries[b.getId()]),opacity:.4},stroke:{color:"white",width:3}});return[c]};angular.extend(a,{center:{lat:30,lon:0,zoom:2},defaults:{interactions:{mouseWheelZoom:!1}},layers:{main:{source:{type:"OSM"}},geojson:{source:{type:"GeoJSON",url:"examples/json/countries.geo.json"},style:g}},events:{layers:{vector:["mousemove","click"]}}}),b.get("examples/json/all.json").success(function(b){a.countries={};for(var c=0;c<b.length;c++){var d=b[c];a.countries[d["alpha-3"]]=d}}),c.getMap().then(function(b){var c,e=new ol.Overlay({element:document.getElementById("countrybox"),positioning:"center-center",offset:[-25,59],position:[0,0]}),f=!0;a.$on("openlayers.geojson.mousemove",function(h,i,j){return a.$apply(function(b){b.selectedCountry=i?a.countries[i.getId()]:""}),i?(f&&(b.addOverlay(e),f=!1),console.log(j,b.getEventCoordinate(j)),e.setPosition(b.getEventCoordinate(j)),void(i&&(i.setStyle(d.createStyle({fill:{color:"#FFF"}})),c&&i!==c&&c.setStyle(g(c)),c=i))):(b.removeOverlay(e),void(f=!0))})})}]);var a=angular.module("webapp");a.controller("LayerOpacityController",["$scope",function(a){angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:3},layers:{mapbox:{visible:!0,opacity:.6,source:{type:"TileJSON",url:"https://api.tiles.mapbox.com/v3/examples.map-i86nkdio.jsonp"}}}})}]);var a=angular.module("webapp");a.controller("LayerZoomChangerController",["$scope",function(a){angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:10},layers:{main:{source:{type:"OSM"}}}}),a.$watch("london.zoom",function(b){a.layers.main.source.url=b>12?"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png":"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}]);var a=angular.module("webapp");a.controller("LayerController",["$scope",function(a){a.sources={openstreetmap:{name:"OpenStreetMap",type:"OSM"},mapboxStreets:{name:"MapBox Streets",type:"TileJSON",url:"https://api.tiles.mapbox.com/v3/tombatossals.map-fmyyujjl.jsonp"},mapboxTerrain:{name:"MapBox Terrain",type:"TileJSON",url:"https://api.tiles.mapbox.com/v3/tombatossals.jbn2nnon.jsonp"},mapboxGeographyclass:{name:"Mapbox Geography",type:"TileJSON",url:"http://api.tiles.mapbox.com/v3/mapbox.geography-class.jsonp"}},angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:3},layers:{main:{source:a.sources.mapboxGeographyclass}}})}]);var a=angular.module("webapp");a.controller("MainController",["$scope","$http",function(a,b){b.get("json/examples.json").success(function(b){a.examples=b}),a.$on("$routeChangeSuccess",function(b,c){a.active=c.params.example})}]);var a=angular.module("webapp");a.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/frontpage.html"}).when("/:example",{templateUrl:function(a){return"partials/"+a.example+".html"}})}])}();