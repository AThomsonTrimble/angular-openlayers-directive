/*! angular-openlayers-directive WebApp 22-12-2014 */
!function(){"use strict";angular.module("webapp",["ngRoute","openlayers-directive"]).config(["$locationProvider",function(a){a.html5Mode(!1)}]);var a=angular.module("webapp");a.controller("CenterController",["$scope",function(a){angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:6}})}]);var a=angular.module("webapp");a.controller("FrontPageController",["$scope","$http","olData","olHelpers",function(a,b,c,d){var e,f={"009":{name:"Oceania",colors:["#CC0066","#993366","#990066","#CC3399","#CC6699"]},"019":{name:"America",colors:["#006699","#336666","#003366","#3399CC","#6699CC"]},150:{name:"Europe",colors:["#FF0000","#CC3333","#990000","#FF3333","#FF6666"]},"002":{name:"Africa",colors:["#00CC00","#339933","#009900","#33FF33","#66FF66"]},142:{name:"Asia",colors:["#FFCC00","#CC9933","#999900","#FFCC33","#FFCC66"]}},g=function(a){if(!a||!a["region-code"])return"#FFF";var b=f[a["region-code"]].colors,c=a["alpha-3"].charCodeAt(0)%b.length;return b[c]},h=function(b){var c=d.createStyle({fill:{color:g(a.countries[b.getId()]),opacity:.4},stroke:{color:"white",width:3}});return[c]};angular.extend(a,{center:{lat:30,lon:0,zoom:2},defaults:{interactions:{mouseWheelZoom:!1}},layers:{main:{source:{type:"OSM"}},geojson:{source:{type:"GeoJSON",url:"examples/json/countries.geo.json"},style:h}},events:{layers:{vector:["mousemove","click"]}}}),b.get("examples/json/all.json").success(function(b){a.countries={};for(var c=0;c<b.length;c++){var d=b[c];a.countries[d["alpha-3"]]=d}}),c.getMap().then(function(b){e=new ol.Overlay({element:document.getElementById("countrybox"),positioning:"center-center",position:[0,0]});var c,f=function(a){console.log(a.clientX,a.clientY,b.getCoordinateFromPixel([a.clientX-35,a.clientY+50])),e.setPosition(b.getCoordinateFromPixel([a.clientX-35,a.clientY+50]))};a.$on("openlayers.geojson.mousemove",function(g,i,j){return i?(b.addOverlay(e),a.$apply(function(b){b.selectedCountry=i?a.countries[i.getId()]:""}),f(j),i.setStyle(d.createStyle({fill:{color:"#FFF"}})),c&&i!==c&&c.setStyle(h(c)),void(c=i)):void b.removeOverlay(e)})})}]);var a=angular.module("webapp");a.controller("LayerController",["$scope",function(a){a.sources={openstreetmap:{name:"OpenStreetMap",type:"OSM"},mapboxStreets:{name:"MapBox Streets",type:"TileJSON",url:"https://api.tiles.mapbox.com/v3/tombatossals.map-fmyyujjl.jsonp"},mapboxTerrain:{name:"MapBox Terrain",type:"TileJSON",url:"https://api.tiles.mapbox.com/v3/tombatossals.jbn2nnon.jsonp"},mapboxGeographyclass:{name:"Mapbox Geography",type:"TileJSON",url:"http://api.tiles.mapbox.com/v3/mapbox.geography-class.jsonp"}},angular.extend(a,{london:{lat:51.505,lon:-.09,zoom:3},layers:{main:{source:a.sources.mapboxGeographyclass}}})}]);var a=angular.module("webapp");a.controller("MainController",["$scope","$http",function(a,b){b.get("json/examples.json").success(function(b){a.examples=b}),a.$on("$routeChangeSuccess",function(b,c){a.active=c.params.example})}]);var a=angular.module("webapp");a.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/frontpage.html"}).when("/:example",{templateUrl:function(a){return"partials/"+a.example+".html"}})}])}();